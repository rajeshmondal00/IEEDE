<!DOCTYPE html>
<html lang="en">
  {% load static %}
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Personal Profile || IEEDE</title>
    <link rel="stylesheet" href="{% static '/css/citizen_landing.css' %}" />
    <link
      rel="stylesheet"
      href="{% static '/icons/fontawesome-free-6.6.0-web/css/all.min.css' %}"
    />
    <link
      rel="stylesheet"
      href="{% static '/icons/line-awesome/css/line-awesome.min.css' %}"
    />
    <link rel="stylesheet" href="{% static '/bootstrap/css/bootstrap.min.css' %}" />
    <script src="{% static '/js/code.jquery.com_jquery-3.7.1.min.js' %}"></script>
  </head>
  <body>
    <section class="sidebar" id="sidebar">
      <i class="fa-solid fa-xmark align-self-end fs-5 text-light mt-3 me-3" id="close-bar"></i>
      <img src="{% static '/img/IEEDE_logo_blue.png' %}" alt="logo" id="logo" />
      <a href="/" class="side-a side-a-top" title="Dashboard"
        ><i class="fa-solid fa-gauge"></i
        ><span class="aspan">&nbsp;Dashboard</span></a
      >
      <a href="/personal-profile" class="side-a" title="Personal Profile"
        ><i class="fa-solid fa-user"></i
        ><span class="aspan">&nbsp;Personal&nbsp;Profile</span></a
      >
      <a href="/citizen-education-profile" class="side-a" title="Educational Profile"
        ><i class="fa-solid fa-user-graduate"></i
        ><span class="aspan">&nbsp;Educational&nbsp;Profile</span></a
      >
      <a href="/citizen-skillset" class="side-a"
        ><i class="fa-solid fa-bar-chart"></i
        ><span class="aspan">&nbsp;Skillset</span></a
      >
      <a href="/citizen-logout" class="side-a position-absolute" title="Log Out" style="bottom: 20px;width: 85%;"
        ><i class="fa-solid fa-right-from-bracket"></i
        ><span class="aspan">&nbsp;Log&nbsp;Out</span></a
      >
    </section>
    <section class="main-body bg-primary-subtle">
      <nav id="navbar">
        <i class="las la-bars" id="barswitch"></i>
        <form id="searchform">
          <input
            type="search"
            name="search"
            id="search"
            placeholder="Search...."
          />
          <button type="submit">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </form>
        <i class="fa-solid fa-magnifying-glass mobi-search text-light fs-5 position-absolute" style="right: 30px;" data-bs-toggle="modal" data-bs-target="#searchModal"></i>
      </nav>
      <div class="body-main">
        <div class="profile-body pbpp">
          <div class="pbl shadow-sm bg-white">
            <div class="pblu">
              <img src="../static/media/{{ citizen.profile_img }}" alt="logo" />
              <h2>{{citizen.name}}</h2>
              <!-- Button trigger modal -->
            <button
              type="button"
              class="btn btn-primary mt-2"
              data-bs-toggle="modal"
              data-bs-target="#exampleModal"
            >
              Change Profile Picture&nbsp;<i class="las la-edit"></i
              >
            </button>
            </div>
          </div>
          <div class="pbr shadow-sm bg-white">
            <h2 class="mb-4">
              <i class="las la-user"></i>&nbsp;Personal Profile
            </h2>
            <table class="table">
              <tbody>
                <tr>
                  <th>Name:</th>
                  <td>{{citizen.name}}</td>
                </tr>
                <tr>
                  <th>MEC ID:</th>
                  <td>{{user.username}}</td>
                </tr>
                <tr>
                  <th>Personal Email:</th>
                  <td>{{user.email}}</td>
                </tr>
                <tr>
                  <th>Phone Number:</th>
                  <td>{{citizen.phone}}</td>
                </tr>
                <tr>
                  <th>Address:</th>
                  <td>
                    {{citizen.Address}}
                  </td>
                </tr>
              </tbody>
            </table>
            <!-- Button trigger modal -->
            <button
              type="button"
              class="btn btn-primary"
              onclick="editPersonalProfile('{{citizen.name}}','{{user.email}}','{{citizen.phone}}','{{citizen.Address}}')"
            >
              Edit Profile&nbsp;<i class="las la-edit"></i>
            </button>

            <!-- Modal -->
            <div
              class="modal fade"
              id="exampleModal"
              tabindex="-1"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                      Update Profile Picture
                    </h1>
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>
                  <div class="modal-body">
                    <form class="login-form" id="logform">
                      <div class="input-box" id="mecform">
                      <div class="input-box" id="permanent-address-box">
                        <label for="permanent-address">Select Profile Picture</label>
                        <input
                          class="input form-control"
                          type="file"
                          accept="image/*"
                          name="profileimage"
                          id="profileimage"
                          required
                        />
                      </div>

                      <input
                        class="btn btn-primary mt-4"
                        id="otp-btn"
                        type="submit"
                        value="Update"
                      />
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <div
              class="modal fade modal2"
              id="editModal"
              tabindex="-1"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                      Update Profile
                    </h1>
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>
                  <div class="modal-body">
                    <form class="login-form" id="logform">
                      <div class="input-box" id="mecform">
                        <label for="mec">Edit Name</label>
                        <input
                          class="input"
                          type="text"
                          name="name"
                          id="name"
                          required
                        />
                      </div>
                      <div class="input-box" id="mecform">
                        <label for="mec">Edit Email</label>
                        <input
                          class="input"
                          type="email"
                          name="email"
                          id="email"
                          required
                        />
                      </div>
                      <div class="input-box" id="phone-box">
                        <label for="phone">Phone Number</label>
                        <input
                          class="input"
                          type="tel"
                          name="phone"
                          id="phone"
                          pattern="[0-9]{10}"
                          title="Please enter a valid 10-digit phone number."
                          required
                        />
                      </div>

                      <div class="input-box" id="permanent-address-box">
                        <label for="permanent-address">Address</label>
                        <input
                          class="input"
                          type="text"
                          name="address"
                          id="address"
                          required
                        />
                      </div>

                      <input
                        class="btn btn-primary mt-4"
                        id="otp-btn"
                        type="submit"
                        value="Update"
                      />
                    </form>
                  </div>
                </div>
              </div>
            </div>

            <div class="modal fade" id="searchModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Search</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
             <form id="searchform" class="searchform-modal">
          <input
            type="search"
            name="search"
            id="search"
            placeholder="Search...."
          />
          <button type="submit">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </form>
          </div>
        </div>
      </div>
    </div>

    <script src="{% static '/icons/fontawesome-free-6.6.0-web/js/all.min.js' %}"></script>
    <script src="{% static '/bootstrap/js/bootstrap.min.js' %}"></script>
    <script src="{% static '/js/sidebar.js' %}"></script>
    <script>
      function editPersonalProfile(name,email,phone,address){
          $('#name').val(name);
          $('#email').val(email);
          $('#phone').val(phone);
          $('#address').val(address);
          $('#editModal').modal('show');
      }
    </script>
  </body>
</html>
